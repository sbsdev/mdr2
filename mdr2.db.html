<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>mdr2.db documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Madras2 0.3.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mdr2</span></div></div></li><li class="depth-2"><a href="mdr2.abacus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>abacus</span></div></a></li><li class="depth-3 branch"><a href="mdr2.abacus.import.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>import</span></div></a></li><li class="depth-3"><a href="mdr2.abacus.validation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validation</span></div></a></li><li class="depth-2 branch"><a href="mdr2.archive.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>archive</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></div></li><li class="depth-3"><a href="mdr2.data.xml.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xml</span></div></a></li><li class="depth-2 branch current"><a href="mdr2.db.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2"><a href="mdr2.dtb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dtb</span></div></a></li><li class="depth-3"><a href="mdr2.dtb.xml.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xml</span></div></a></li><li class="depth-2"><a href="mdr2.dtbook.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>dtbook</span></div></a></li><li class="depth-3"><a href="mdr2.dtbook.validation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validation</span></div></a></li><li class="depth-2 branch"><a href="mdr2.encode.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>encode</span></div></a></li><li class="depth-2 branch"><a href="mdr2.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-2 branch"><a href="mdr2.layout.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>layout</span></div></a></li><li class="depth-2 branch"><a href="mdr2.main.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>main</span></div></a></li><li class="depth-2 branch"><a href="mdr2.obi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>obi</span></div></a></li><li class="depth-2 branch"><a href="mdr2.pipeline1.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline1</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline2</span></div></div></li><li class="depth-3 branch"><a href="mdr2.pipeline2.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="mdr2.pipeline2.scripts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scripts</span></div></a></li><li class="depth-3"><a href="mdr2.pipeline2.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2 branch"><a href="mdr2.production.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>production</span></div></a></li><li class="depth-2"><a href="mdr2.production-monitoring.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>production-monitoring</span></div></a></li><li class="depth-3"><a href="mdr2.production.path.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>path</span></div></a></li><li class="depth-2 branch"><a href="mdr2.queues.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>queues</span></div></a></li><li class="depth-2 branch"><a href="mdr2.rdf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rdf</span></div></a></li><li class="depth-2 branch"><a href="mdr2.repair.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repair</span></div></a></li><li class="depth-2 branch"><a href="mdr2.schema-validation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema-validation</span></div></a></li><li class="depth-2 branch"><a href="mdr2.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="mdr2.views.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>views</span></div></a></li><li class="depth-2"><a href="mdr2.vubis.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vubis</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="mdr2.db.html#var-delete.21"><div class="inner"><span>delete!</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find"><div class="inner"><span>find</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-all"><div class="inner"><span>find-all</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-all-in-production"><div class="inner"><span>find-all-in-production</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-archived"><div class="inner"><span>find-archived</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-archived-by-library-signature"><div class="inner"><span>find-archived-by-library-signature</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-archived-by-productnumber"><div class="inner"><span>find-archived-by-productnumber</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-archived-by-title-or-creator"><div class="inner"><span>find-archived-by-title-or-creator</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-archived-by-year"><div class="inner"><span>find-archived-by-year</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-archived-by-year-month"><div class="inner"><span>find-archived-by-year-month</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-by-productnumber"><div class="inner"><span>find-by-productnumber</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-by-state"><div class="inner"><span>find-by-state</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-production-type"><div class="inner"><span>find-production-type</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-state"><div class="inner"><span>find-state</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-user"><div class="inner"><span>find-user</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-find-user-roles"><div class="inner"><span>find-user-roles</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-get-generated-key"><div class="inner"><span>get-generated-key</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-get-user"><div class="inner"><span>get-user</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-insert.21"><div class="inner"><span>insert!</span></div></a></li><li class="depth-1"><a href="mdr2.db.html#var-update.21"><div class="inner"><span>update!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">mdr2.db</h2><div class="doc"><div class="markdown"><p>Persistence for productions</p></div></div><div class="public anchor" id="var-delete.21"><h3>delete!</h3><div class="usage"><code>(delete! {:keys (id)})</code><code>(delete! {:keys (id)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Remove the production with the given <code>id</code></p></div></div></div><div class="public anchor" id="var-find"><h3>find</h3><div class="usage"><code>(find {:keys (id)})</code><code>(find {:keys (id)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return production for given <code>id</code></p></div></div></div><div class="public anchor" id="var-find-all"><h3>find-all</h3><div class="usage"><code>(find-all)</code><code>(find-all {} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return all productions</p></div></div></div><div class="public anchor" id="var-find-all-in-production"><h3>find-all-in-production</h3><div class="usage"><code>(find-all-in-production)</code><code>(find-all-in-production {} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return all productions</p></div></div></div><div class="public anchor" id="var-find-archived"><h3>find-archived</h3><div class="usage"><code>(find-archived {:keys (id)})</code><code>(find-archived {:keys (id)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return archived production for given <code>id</code></p></div></div></div><div class="public anchor" id="var-find-archived-by-library-signature"><h3>find-archived-by-library-signature</h3><div class="usage"><code>(find-archived-by-library-signature {:keys (library_signature)})</code><code>(find-archived-by-library-signature {:keys (library_signature)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return the archived productions for given <code>library_signature</code></p></div></div></div><div class="public anchor" id="var-find-archived-by-productnumber"><h3>find-archived-by-productnumber</h3><div class="usage"><code>(find-archived-by-productnumber {:keys (product_number)})</code><code>(find-archived-by-productnumber {:keys (product_number)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return the production for given <code>product_number</code></p></div></div></div><div class="public anchor" id="var-find-archived-by-title-or-creator"><h3>find-archived-by-title-or-creator</h3><div class="usage"><code>(find-archived-by-title-or-creator {:keys (term)})</code><code>(find-archived-by-title-or-creator {:keys (term)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return the archived productions for given title or creator</p></div></div></div><div class="public anchor" id="var-find-archived-by-year"><h3>find-archived-by-year</h3><div class="usage"><code>(find-archived-by-year {:keys (year)})</code><code>(find-archived-by-year {:keys (year)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return archived production for given <code>year</code></p></div></div></div><div class="public anchor" id="var-find-archived-by-year-month"><h3>find-archived-by-year-month</h3><div class="usage"><code>(find-archived-by-year-month {:keys (month year)})</code><code>(find-archived-by-year-month {:keys (month year)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return archived production for given <code>year</code> and <code>month</code></p></div></div></div><div class="public anchor" id="var-find-by-productnumber"><h3>find-by-productnumber</h3><div class="usage"><code>(find-by-productnumber {:keys (product_number)})</code><code>(find-by-productnumber {:keys (product_number)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return the production for given <code>product_number</code></p></div></div></div><div class="public anchor" id="var-find-by-state"><h3>find-by-state</h3><div class="usage"><code>(find-by-state {:keys (state)})</code><code>(find-by-state {:keys (state)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return the production for given <code>state</code></p></div></div></div><div class="public anchor" id="var-find-production-type"><h3>find-production-type</h3><div class="usage"><code>(find-production-type {:keys (id)})</code><code>(find-production-type {:keys (id)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return the production type for given <code>id</code></p></div></div></div><div class="public anchor" id="var-find-state"><h3>find-state</h3><div class="usage"><code>(find-state {:keys (id)})</code><code>(find-state {:keys (id)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return the state for given <code>id</code></p></div></div></div><div class="public anchor" id="var-find-user"><h3>find-user</h3><div class="usage"><code>(find-user {:keys (id)})</code><code>(find-user {:keys (id)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return the user with the given <code>id</code></p></div></div></div><div class="public anchor" id="var-find-user-roles"><h3>find-user-roles</h3><div class="usage"><code>(find-user-roles {:keys (id)})</code><code>(find-user-roles {:keys (id)} {:keys [connection]})</code></div><div class="doc"><div class="markdown"><p>Return all roles for the user with the given <code>id</code></p></div></div></div><div class="public anchor" id="var-get-generated-key"><h3>get-generated-key</h3><div class="usage"><code>(get-generated-key result)</code></div><div class="doc"><div class="markdown"><p>Get the generated key from an <code>insert!</code> result. Returns <code>nil</code> if the result is not from an insert</p></div></div><div class="src-link"><a href="https://github.com/sbsdev/mdr2/blob/master/src/mdr2/db.clj#L16">view source</a></div></div><div class="public anchor" id="var-get-user"><h3>get-user</h3><div class="usage"><code>(get-user username)</code></div><div class="doc"><div class="markdown"><p>Return the user with the given <code>username</code></p></div></div><div class="src-link"><a href="https://github.com/sbsdev/mdr2/blob/master/src/mdr2/db.clj#L48">view source</a></div></div><div class="public anchor" id="var-insert.21"><h3>insert!</h3><div class="usage"><code>(insert! production)</code></div><div class="doc"><div class="markdown"><p>Insert the given <code>production</code></p></div></div><div class="src-link"><a href="https://github.com/sbsdev/mdr2/blob/master/src/mdr2/db.clj#L24">view source</a></div></div><div class="public anchor" id="var-update.21"><h3>update!</h3><div class="usage"><code>(update! {:keys [library_number product_number id], :as production})</code></div><div class="doc"><div class="markdown"><p>Update the production with the given <code>id</code>, <code>product_number</code> or <code>library_number</code></p></div></div><div class="src-link"><a href="https://github.com/sbsdev/mdr2/blob/master/src/mdr2/db.clj#L35">view source</a></div></div></div></body></html>